<!DOCTYPE html>
<html>
  <head>
  <title>
      
          Problema de ImageMagick (rmagick) y passenger (mod_rails) - carakan
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="map[]" />
  <link rel="shortcut icon" type="image/x-icon" href="https://carakan.github.io/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="https://carakan.github.io/style.min.a6cab246517742ad1189b209575fc61556550e663cdfe02a0aab0632b39e978b.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="Problema de ImageMagick (rmagick) y passenger (mod_rails)" />
<meta property="og:description" content="Recientemente en uno de mis proyectos estamos utilizando el plugin para subir archivos paperclip tutorial, este plugin tiene características de re-dimension de imágenes pero dentro de nuestro servidor web no funcionaba, lo que nos parecio bastante raro, buscando por internet encontré que el problema se debía al momento de usar mod_rails, el cual no cargaba las librerías necesarias, en este caso a ImageMagick, aqui el mismo problema pero para oracle y algunas de sus librerias." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://carakan.github.io/blog/problema-de-imagemagick-y-passenger-mod_rails/" />
<meta property="article:published_time" content="2008-08-06T18:59:05&#43;00:00"/>
<meta property="article:modified_time" content="2008-08-06T18:59:05&#43;00:00"/>

<meta itemprop="name" content="Problema de ImageMagick (rmagick) y passenger (mod_rails)">
<meta itemprop="description" content="Recientemente en uno de mis proyectos estamos utilizando el plugin para subir archivos paperclip tutorial, este plugin tiene características de re-dimension de imágenes pero dentro de nuestro servidor web no funcionaba, lo que nos parecio bastante raro, buscando por internet encontré que el problema se debía al momento de usar mod_rails, el cual no cargaba las librerías necesarias, en este caso a ImageMagick, aqui el mismo problema pero para oracle y algunas de sus librerias.">


<meta itemprop="datePublished" content="2008-08-06T18:59:05&#43;00:00" />
<meta itemprop="dateModified" content="2008-08-06T18:59:05&#43;00:00" />
<meta itemprop="wordCount" content="232">



<meta itemprop="keywords" content="ImageMagick,mod_rails,passenger,ruby,ruby,ruby on rails,ruby on rails," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Problema de ImageMagick (rmagick) y passenger (mod_rails)"/>
<meta name="twitter:description" content="Recientemente en uno de mis proyectos estamos utilizando el plugin para subir archivos paperclip tutorial, este plugin tiene características de re-dimension de imágenes pero dentro de nuestro servidor web no funcionaba, lo que nos parecio bastante raro, buscando por internet encontré que el problema se debía al momento de usar mod_rails, el cual no cargaba las librerías necesarias, en este caso a ImageMagick, aqui el mismo problema pero para oracle y algunas de sus librerias."/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5022449-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>

  <body>
    
  <h1>Problema de ImageMagick (rmagick) y passenger (mod_rails)</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://carakan.github.io//img/avatar.jpg">
    <a href="https://carakan.github.io/"><img src="https://carakan.github.io//img/avatar-border.svg" }}></a>
  </div>
  
  <h2><a class="author" href="https://carakan.github.io/">Carlos Ramos</a></h2>
</header>

  
  
  <p class="date">August 6, 2008</p>
  
  <div id="contentBody">
    <p>Recientemente en uno de mis proyectos estamos utilizando el plugin para subir archivos <a href="http://jimneath.org/2008/04/17/paperclip-attaching-files-in-rails/">paperclip tutorial</a>, este plugin tiene características de re-dimension de imágenes pero dentro de nuestro servidor web no funcionaba, lo que nos parecio bastante raro, buscando por internet encontré que el problema se debía al momento de usar mod_rails, el cual no cargaba las librerías necesarias, en este caso a ImageMagick, <a href="http://blog.rayapps.com/2008/05/21/using-mod_rails-with-rails-applications-on-oracle/">aqui el mismo problema pero para oracle y algunas de sus librerias</a>. La solución es la siguiente: Ir a la carpeta del ejecutable de ruby, en mi caso utilizo <a href="http://www.rubyenterpriseedition.com/">ruby-enterprise</a> y que instale en /opt/ruby/bin, o en una carpeta cualquiera que tengas acceso se crea el archivo ruby_rmagick asi:<code>
sudo vi /opt/ruby/ruby_rmagick
</code>Y dentro de este archivo se añade:<code>
#!/bin/bash
export MAGICK_HOME=&quot;/usr/local/lib/ImageMagick-6.4.2&quot; # ruta a ImageMagick
export DYLD_LIBRARY_PATH=&quot;$MAGICK_HOME/lib&quot;
export PATH=$MAGICK_HOME/bin:/usr/local/bin/:$PATH /opt/ruby/bin/ruby $*  # ruta al Interprete de ruby 
</code>Esto añade las variables necesarias y llama al interprete de ruby, lo guardamos y le asignamos permisos de ejecucion:<code>
sudo chmod +x /opt/ruby/ruby_rmagick
</code>Ahora editamos el archivo con el que se configuro mod_rails para que cargue el nuevo archivo que acabamos de grabar:<code>
LoadModule passenger_module /opt/ruby/lib/ruby/gems/1.8/gems/passenger-2.0.2/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby/lib/ruby/gems/1.8/gems/passenger-2.0.2
PassengerRuby /opt/ruby/bin/ruby_rmagick    # Aqui se cambia al nuevo interprete
</code>Este archivo de configuracion es para passenger 2.0.2 para versiones 1.X.X debes de cambiar<code>
RailsRuby /usr/local/bin/ruby_rmagick 
</code>Actualizacion: <strong>18 junio 2009</strong> He arreglado un poco las instrucciones, al parecer lo hice muy a la rapida.</p>

  </div>
  <footer>
  <p>
  &copy; 2019 Carlos Ramos.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
