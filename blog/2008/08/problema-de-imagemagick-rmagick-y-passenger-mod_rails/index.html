<!DOCTYPE html>
<html lang="en-US">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Carlos Ramos developer">
<meta name="keywords" content="carakan,ruby,elixir">

<base href="https://carakan.github.io/">

<title>
  carakan - Problema de ImageMagick (rmagick) y passenger (mod_rails) 
</title>

<meta name="generator" content="Hugo 0.57.2" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link rel="stylesheet" href="https://carakan.github.io/css/main.css">
<link rel="stylesheet" href="https://carakan.github.io/css/custom.css">




<link rel="apple-touch-icon" sizes="180x180" href="https://carakan.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://carakan.github.io/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://carakan.github.io/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://carakan.github.io/manifest.json">
<link rel="mask-icon" href="https://carakan.github.io/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-US">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Problema de ImageMagick (rmagick) y passenger (mod_rails)</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
        PUBLISHED ON AUG 6, 2008 
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    
    <p>Recientemente en uno de mis proyectos estamos utilizando el plugin para subir archivos <a href="http://jimneath.org/2008/04/17/paperclip-attaching-files-in-rails/">paperclip tutorial</a>, este plugin tiene características de re-dimension de imágenes pero dentro de nuestro servidor web no funcionaba, lo que nos parecio bastante raro, buscando por internet encontré que el problema se debía al momento de usar mod_rails, el cual no cargaba las librerías necesarias, en este caso a ImageMagick, <a href="http://blog.rayapps.com/2008/05/21/using-mod_rails-with-rails-applications-on-oracle/">aqui el mismo problema pero para oracle y algunas de sus librerias</a>. La solución es la siguiente: Ir a la carpeta del ejecutable de ruby, en mi caso utilizo <a href="http://www.rubyenterpriseedition.com/">ruby-enterprise</a> y que instale en /opt/ruby/bin, o en una carpeta cualquiera que tengas acceso se crea el archivo ruby_rmagick asi:```
sudo vi /opt/ruby/ruby_rmagick</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Y dentro de este archivo se añade:```" data-lang="Y dentro de este archivo se añade:```"><span style="color:#080">#!/bin/bash
</span><span style="color:#080"></span><span style="color:#a2f">export</span> <span style="color:#b8860b">MAGICK_HOME</span><span style="color:#666">=</span><span style="color:#b44">&#34;/usr/local/lib/ImageMagick-6.4.2&#34;</span> <span style="color:#080;font-style:italic"># ruta a ImageMagick</span>
<span style="color:#a2f">export</span> <span style="color:#b8860b">DYLD_LIBRARY_PATH</span><span style="color:#666">=</span><span style="color:#b44">&#34;</span><span style="color:#b8860b">$MAGICK_HOME</span><span style="color:#b44">/lib&#34;</span>
<span style="color:#a2f">export</span> <span style="color:#b8860b">PATH</span><span style="color:#666">=</span><span style="color:#b8860b">$MAGICK_HOME</span>/bin:/usr/local/bin/:<span style="color:#b8860b">$PATH</span> /opt/ruby/bin/ruby <span style="color:#b8860b">$*</span>  <span style="color:#080;font-style:italic"># ruta al Interprete de ruby</span> </code></pre></div>
<p>Esto añade las variables necesarias y llama al interprete de ruby, lo guardamos y le asignamos permisos de ejecucion:```
sudo chmod +x /opt/ruby/ruby_rmagick</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Ahora editamos el archivo con el que se configuro mod\_rails para que cargue el nuevo archivo que acabamos de grabar:```" data-lang="Ahora editamos el archivo con el que se configuro mod\_rails para que cargue el nuevo archivo que acabamos de grabar:```">LoadModule passenger_module /opt/ruby/lib/ruby/gems/1.8/gems/passenger-2.0.2/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby/lib/ruby/gems/1.8/gems/passenger-2.0.2
PassengerRuby /opt/ruby/bin/ruby_rmagick    # Aqui se cambia al nuevo interprete</code></pre></div>
<p>Este archivo de configuracion es para passenger 2.0.2 para versiones 1.X.X debes de cambiar<code>
RailsRuby /usr/local/bin/ruby_rmagick 
</code>Actualizacion: <strong>18 junio 2009</strong> He arreglado un poco las instrucciones, al parecer lo hice muy a la rapida.</p>

      
      

<h1>See Also</h1>
<ul>
	
    <li><p><a href="https://carakan.github.io/blog/2008/06/llamar-a-procedimientos-pl/sql-de-oracle-con-ruby-plsql/">Llamar a procedimientos PL/SQL de Oracle con ruby-plsql</a></p></li>
	
    <li><p><a href="https://carakan.github.io/blog/2008/06/salio-a-la-luz-ruby-enterprise-edition/">Salio a la luz ruby enterprise edition</a></p></li>
	
    <li><p><a href="https://carakan.github.io/blog/2008/06/lanzamiento-de-rails-2.1-y-ruby-1.8.7/">Lanzamiento de Rails 2.1 y ruby 1.8.7</a></p></li>
	
    <li><p><a href="https://carakan.github.io/blog/2008/06/lanzamiento-de-rails-2.1-y-ruby-1.8.7/">Lanzamiento de Rails 2.1 y ruby 1.8.7</a></p></li>
	
    <li><p><a href="https://carakan.github.io/blog/2008/07/nace-bolivia-on-rails/">Nace Bolivia on Rails</a></p></li>
	
</ul>

  
      
  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
      
      
      TAGS:
      
      
      <a class="meta" href="https://carakan.github.io/tags/imagemagick">IMAGEMAGICK</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/mod_rails">MOD_RAILS</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/passenger">PASSENGER</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/ruby">RUBY</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/ruby">RUBY</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/ruby-on-rails">RUBY ON RAILS</a>, 
      
      <a class="meta" href="https://carakan.github.io/tags/ruby-on-rails">RUBY ON RAILS</a>
      
      
      
    </h6>
  </div>
  
</section>








<section id="menu-pane" class="row menu text-center">
  
  
  <span><a class="menu-item" href="https://carakan.github.io/blog/2008/08/bloguivianos-encuentro-de-bloggers-bolivianos/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a></span>
  
  
  
  <span><a class="menu-item" href="https://carakan.github.io/blog"><i class="fa fa-bars" aria-hidden="true"></i></a></span>
  
  
  <span><a class="menu-item" href="https://carakan.github.io/blog/2008/08/nuevo-version-del-interprete-ruby-para-entornos-windows/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></span>
  
  
  <h4 class="text-center"><a class="menu-item" href="https://carakan.github.io/"><i class="fa fa-home" aria-hidden="true"></i></a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">© 2019. Carlos Ramos. <a href="http://creativecommons.org/licenses/by/3.0/">Some Rights Reserved</a>.</h6>
  
      
      <h6><a href="" aria-label="RSS Feed"><i class="fas fa-rss" aria-hidden="true"></i></a></h6>
    
  
</footer>

</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  

<script type="text/javascript">
hljs.initHighlightingOnLoad();
</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5022449-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
<script src="js/custom.js"></script>
</body>
</html>


